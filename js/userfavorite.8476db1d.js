"use strict";(self["webpackChunkphotolab"]=self["webpackChunkphotolab"]||[]).push([[152],{9101:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"userFavorite"}},[e("UFavorite")],1)},r=[],a=s(1096),o=s(7179),n=s(3385),l=s(6904),d=s(5057),u=s(2469),h=s(549),c=s(2021),p=s(7615),m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"uFavorite"}},[e(a.Z,[e(c.Z,{attrs:{multiple:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[e(p.Z,{attrs:{"justify-center":""}},[e("div",{staticClass:"grid"},[e("Photoswipe",{attrs:{bubble:""}},t._l(t.imgsArr,(function(s,i){return e("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],staticClass:"item"},[e(n.Z,{attrs:{width:"300"}},[e(u.Z,{directives:[{name:"pswp",rawName:"v-pswp",value:s,expression:"props"}],attrs:{src:s.src}})],1),e(h.Z,{attrs:{value:s.p_id},scopedSlots:t._u([{key:"default",fn:function({active:r,toggle:a}){return[e(l.Z,{on:{submit:function(e){return e.preventDefault(),t.onSubmit(s,r,i)}}},[t.user.account.length>0?e(o.Z,{attrs:{icon:"",type:"submit"},on:{click:a}},[e(d.Z,{attrs:{color:"rgba(255, 255, 255, 0.7)"}},[t._v(t._s(r?"mdi-heart":"mdi-heart-outline"))])],1):t._e()],1)]}}],null,!0)})],1)})),0)],1)])],1)],1)],1)},v=[],f=(s(7658),s(7564)),g=s.n(f),y=s(8751),b=s.n(y),w={data(){return{imgsArr:[],props:"",selected:[]}},computed:{user(){return this.$store.state.user}},methods:{onSubmit(t,e,s){!1===e&&this.axios.delete("https://gp-photolab.onrender.com/users/image/"+this.$store.state.user.id+"/"+t.p_id).then((t=>{t.data.success?(this.$swal({title:"取消收藏",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),setTimeout((()=>{this.imgsArr.splice(s,1);const e=t.data.result.images;for(let t=0;t<e.length;t++)this.selected.push(e[t].p_id)}),1e3)):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}},updated(){const t=document.querySelector(".grid"),e=new(b())(t,{itemSelector:".item",fitWidth:"true"});g()(".item",(()=>{setTimeout((()=>{e.layout()}),150)}))},mounted(){this.axios.get("https://gp-photolab.onrender.com/users/image/"+this.user.id).then((t=>{if(t.data.success){this.imgsArr=t.data.result.images.map((t=>(t.src="https://gp-photolab.onrender.com/photos/file/"+t.file,t.title=t.description,delete t.description,t))),this.imgsArr.reverse();const e=t.data.result.images;for(let t=0;t<e.length;t++)this.selected.push(e[t].p_id);console.log(this.imgsArr)}else this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{"未登入"===t.response.data.message&&(this.$store.commit("logout"),"/login"!==this.$route.path&&this.$router.push("/login")),this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}},$=w,_=s(1001),Z=(0,_.Z)($,m,v,!1,null,null,null),B=Z.exports,A={name:"UserFavorite",components:{UFavorite:B}},x=A,C=(0,_.Z)(x,i,r,!1,null,null,null),k=C.exports},1096:function(t,e,s){s.d(e,{Z:function(){return a}});var i=s(3276),r=s(4987),a=(0,r.Z)(i.Z).extend({name:"v-app",props:{dark:{type:Boolean,default:void 0},id:{type:String,default:"app"},light:{type:Boolean,default:void 0}},computed:{isDark(){return this.$vuetify.theme.dark}},beforeCreate(){if(!this.$vuetify||this.$vuetify===this.$root)throw new Error("Vuetify is not properly initialized, see https://v2.vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object")},render(t){const e=t("div",{staticClass:"v-application--wrap"},this.$slots.default);return t("div",{staticClass:"v-application",class:{"v-application--is-rtl":this.$vuetify.rtl,"v-application--is-ltr":!this.$vuetify.rtl,...this.themeClasses},attrs:{"data-app":!0},domProps:{id:this.id}},[e])}})},6904:function(t,e,s){s(7658);var i=s(4987),r=s(4609),a=s(380);e.Z=(0,i.Z)(r.Z,(0,a.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},7615:function(t,e,s){s(9027);var i=s(2071);e.Z=(0,i.Z)("layout")},549:function(t,e,s){s.d(e,{P:function(){return n},Z:function(){return l}});var i=s(4791),r=s(4987),a=s(6596),o=s(144);const n=o["default"].extend({props:{activeClass:String,value:{required:!1},disabled:Boolean},data:()=>({isActive:!1}),methods:{toggle(){this.isActive=!this.isActive}},render(){if(!this.$scopedSlots.default)return(0,a.Kd)("v-item is missing a default scopedSlot",this),null;let t;return this.$scopedSlots.default&&(t=this.$scopedSlots.default({active:this.isActive,toggle:this.toggle})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(t.data=this._b(t.data||{},t.tag,{class:{[this.activeClass]:this.isActive,"v-item--disabled":this.disabled}}),this.disabled&&(t.data.attrs={...t.data.attrs,tabindex:-1}),t):((0,a.Kd)("v-item should only contain a single element",this),t)}});var l=(0,r.Z)(n,(0,i.d)("itemGroup","v-item","v-item-group")).extend({name:"v-item"})}}]);
//# sourceMappingURL=userfavorite.8476db1d.js.map