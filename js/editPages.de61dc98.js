(self["webpackChunkphotolab"]=self["webpackChunkphotolab"]||[]).push([[168],{4988:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"editPages"}},[e("vue-page-transition",{attrs:{name:"fade-in-up"}},[e("router-view")],1)],1)},a=[],n={name:"EditPages"},r=n,o=i(1001),l=(0,o.Z)(r,s,a,!1,null,null,null),c=l.exports},1294:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var s=i(1096),a=i(7179),n=i(384),r=(i(7658),i(5251)),o=r.Z,l=i(4944),c=i(1050),d=i(6596),u=i(2653),h=o.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,c.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...o.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,c.XE)(e,1024===this.base))},internalArrayValue(){return(0,c.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:i=0}=t,s=this.truncateText(e);return this.showSize?`${s} (${(0,c.XE)(i,1024===this.base)})`:s})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,d.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,c.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(l.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=o.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,u.y0)(t.data.style,{display:"none"})),t},genInput(){const t=o.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,i)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[i],file:e,index:i}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=o.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:t=>{t.target&&"LABEL"===t.target.nodeName||this.$refs.input.click()}},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}}),p=i(6904),m=i(2469),g=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"editPagesHome"}},[e(s.Z,[e(p.Z,{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e(h,{staticClass:"mt-6",attrs:{"small-chips":"","truncate-length":"15","show-size":"",label:"上傳照片",filled:"",rounded:"","prepend-icon":"mdi-camera",color:"#677d35"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),e(a.Z,{staticClass:"ma-5",attrs:{fab:"",small:"",rounded:"",dark:"",color:"rgba(0, 0, 0, 0.8)",type:"sumbit"}},[t._v("送出")])],1),e(n.Z,{staticClass:"elevation-1",attrs:{"calculate-widths":"","hide-default-footer":"",headers:t.headers,items:t.banners},scopedSlots:t._u([{key:"item.src",fn:function({item:t}){return[e(m.Z,{staticClass:"ma-3",attrs:{src:t.src,height:"90px",width:"150px"}})]}},{key:"item.delBtn",fn:function({item:i,index:s}){return[e(a.Z,{staticClass:"ma-3",attrs:{rounded:"",dark:"",color:"rgba(212, 97, 68, 0.8)"},on:{click:function(e){return t.del(i,s)}}},[t._v("刪除")])]}}])})],1)],1)},f=[],v={name:"EditPagesHome",data(){return{headers:[{text:"預覽圖片",align:"start",sortable:!1,value:"src"},{text:"檔名",value:"file",sortable:!1},{text:"上傳日期",value:"date",sortable:!1},{text:"",value:"delBtn",sortable:!1}],banners:[],image:null}},methods:{onSubmit(){if(this.image.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.image.type.includes("image")){const t=new FormData;t.append("image",this.image),this.axios.post("https://gp-photolab.onrender.com/banners/",t).then((t=>{t.data.success?(t.data.result.src="https://gp-photolab.onrender.com/photos/file/"+t.data.result.file,this.$swal({title:"上傳成功",showConfirmButton:!1,timerProgressBar:!0,timer:1500}),this.banners.splice(0,0,t.data.result),this.image=null):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"})},del(t,e){this.$swal({title:"是否要刪除",showDenyButton:!0,confirmButtonText:"Yes"}).then((i=>{i.isConfirmed&&this.axios.delete("https://gp-photolab.onrender.com/banners/"+t._id).then((t=>{t.data.success?(this.$swal({title:"刪除照片",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),setTimeout((()=>{this.banners.splice(e,1)}),1e3)):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}))}},mounted(){this.axios.get("https://gp-photolab.onrender.com/banners/").then((t=>{t.data.success?(this.banners=t.data.result.map((t=>(t.src="https://gp-photolab.onrender.com/photos/file/"+t.file,t))),this.banners.reverse(),console.log(this.banners)):(this.$swal({icon:"error",title:"錯誤",text:t.data.message}),console.log(t.data))})).catch((t=>{"未登入"===t.response.data.message&&(this.$store.commit("logout"),"/login"!==this.$route.path&&this.$router.push("/login")),this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}},b=v,w=i(1001),A=(0,w.Z)(b,g,f,!1,null,null,null),x=A.exports},6085:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return b}});var s=i(1096),a=i(7179),n=i(5223),r=i(384),o=i(2570),l=i(6904),c=i(5057),d=i(2469),u=i(5617),h=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"editPagesNew"}},[e(s.Z,[e(a.Z,{staticClass:"create mt-15",attrs:{width:"200",dark:"",rounded:""},on:{click:t.create}},[t._v("新增文章")]),e(r.Z,{staticClass:"elevation-1 mt-15",attrs:{headers:t.headers,items:t.news},scopedSlots:t._u([{key:"item.src",fn:function({item:t}){return[e(d.Z,{staticClass:"ma-3",attrs:{src:t.src,height:"200px",width:"300px"}})]}},{key:"item.title",fn:function({item:i}){return[e("span",{staticClass:"titlee"},[t._v(t._s(i.title))])]}},{key:"item.content",fn:function({item:i}){return[e("span",{staticClass:"content"},[t._v(t._s(i.content))])]}},{key:"item.delBtn",fn:function({item:i,index:s}){return[e(a.Z,{staticClass:"ma-3",attrs:{rounded:"",dark:"",color:"rgba(103, 125, 53, 0.8)"},on:{click:function(e){return t.edit(i)}}},[t._v("編輯")]),e(a.Z,{staticClass:"ma-3",attrs:{rounded:"",dark:"",color:"rgba(212, 97, 68, 0.8)"},on:{click:function(e){return t.del(i,s)}}},[t._v("刪除")])]}}])}),e(o.Z,{attrs:{"max-width":"500px","background-color":"#ffffff",fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(l.Z,{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e(a.Z,{staticClass:"ma-5",attrs:{absolute:"",right:"",icon:""},on:{click:t.close}},[e(c.Z,[t._v("mdi-close")])],1),e(n.ZB,{staticClass:"editPagesNew"},[e("img-inputer",{staticClass:"addimg mx-auto",attrs:{icon:"img",size:"large",placeholder:"請選擇圖片","bottom-text":"點擊或拖曳更換圖片","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),e(u.Z,{attrs:{outlined:"",name:"input-7-4",label:"標題",value:"",color:"#677d35",rows:"2"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e(u.Z,{attrs:{outlined:"",name:"input-7-4",label:"內容",value:"",color:"#677d35",rows:"14"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticClass:"btn"},[e(a.Z,{attrs:{type:"reset",text:"",rounded:""},on:{click:t.reset}},[t._v("重置")]),e(a.Z,{attrs:{type:"submit",text:"",rounded:""},on:{click:function(e){t.dialog=!1}}},[t._v("送出")])],1)],1)],1)],1),e(o.Z,{attrs:{"max-width":"500px","background-color":"#ffffff",fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[e(l.Z,{on:{submit:function(e){return e.preventDefault(),t.onEditSubmit(t.item)}}},[e(a.Z,{staticClass:"ma-5",attrs:{absolute:"",right:"",icon:""},on:{click:t.close}},[e(c.Z,[t._v("mdi-close")])],1),e(n.ZB,{staticClass:"editPagesNew"},[e("img-inputer",{ref:"img",staticClass:"addimg mx-auto",attrs:{icon:"img",size:"large",placeholder:"請選擇圖片","bottom-text":"點擊或拖曳更換圖片","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*","img-src":t.editsrc},on:{onChange:t.setFileChange},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),e(u.Z,{attrs:{outlined:"",name:"input-7-4",label:"標題",value:"",color:"#677d35",rows:"2"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e(u.Z,{attrs:{outlined:"",name:"input-7-4",label:"內容",value:"",color:"#677d35",rows:"14"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticClass:"btn"},[e(a.Z,{attrs:{type:"reset",text:"",rounded:""},on:{click:t.reset}},[t._v("重置")]),e(a.Z,{attrs:{type:"submit",text:"",rounded:""}},[t._v("儲存")])],1)],1)],1)],1)],1)],1)},p=[],m=(i(7658),{name:"EditPagesNew",data(){return{headers:[{text:"預覽圖片",align:"start",sortable:!1,value:"src"},{text:"標題",value:"title",sortable:!1},{text:"內容",value:"content",sortable:!1},{text:"上傳日期",value:"date",sortable:!1},{text:"",value:"delBtn",sortable:!1}],news:[],item:[],image:null,dialog:!1,editDialog:!1,title:"",content:"",editsrc:null,change:!1}},methods:{onSubmit(){if(this.image.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.image.type.includes("image")){const t=new FormData;t.append("image",this.image),t.append("title",this.title),t.append("content",this.content),this.axios.post("https://gp-photolab.onrender.com/news/",t).then((t=>{t.data.success?(t.data.result.src="https://gp-photolab.onrender.com/photos/file/"+t.data.result.file,this.$swal({title:"上傳成功",showConfirmButton:!1,timerProgressBar:!0,timer:1500}),this.news.splice(0,0,t.data.result),this.image=null):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"})},create(){this.dialog=!0,this.title="",this.content="",this.image=null},close(){this.dialog=!1,this.editDialog=!1,this.title="",this.content="",this.image=null},reset(){this.title="",this.content="",this.image=null},edit(t){this.editDialog=!0,this.editsrc=t.src,this.title=t.title,this.content=t.content,this.item=t},setFileChange(t,e){this.change=!0},onEditSubmit(t){if(this.editDialog=!1,!0===this.change)if(this.image.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.image.type.includes("image")){const t=new FormData;t.append("image",this.image),t.append("title",this.title),t.append("content",this.content),this.axios.patch("https://gp-photolab.onrender.com/news/"+this.item._id+"/imgEdit",t).then((t=>{console.log(t.data),t.data.success?(this.item.title=t.data.result.title,this.item.content=t.data.result.content,this.item.src=this.$refs.img.dataUrl,this.$swal({title:"編輯成功",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),this.change=!1,this.editsrc=null):(console.log(t.data),this.$swal({icon:"error",title:"錯誤",text:t.data.message}))})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"});else this.axios.patch("https://gp-photolab.onrender.com/news/"+this.item._id+"/textEdit",this.$data).then((t=>{t.data.success?(this.item.title=t.data.result.title,this.item.content=t.data.result.content,this.$swal({title:"編輯成功",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),console.log(this.$data)):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))},del(t,e){console.log(e),this.$swal({title:"是否要刪除",showDenyButton:!0,confirmButtonText:"Yes"}).then((i=>{i.isConfirmed&&this.axios.delete("https://gp-photolab.onrender.com/news/"+t._id).then((t=>{t.data.success?(this.$swal({title:"刪除文章",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),setTimeout((()=>{this.news.splice(e,1)}),1e3)):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}))}},mounted(){this.axios.get("https://gp-photolab.onrender.com/news/").then((t=>{t.data.success?(this.news=t.data.result.map((t=>(t.src="https://gp-photolab.onrender.com/photos/file/"+t.file,t))),this.news.reverse(),console.log(this.news)):(this.$swal({icon:"error",title:"錯誤",text:t.data.message}),console.log(t.data))})).catch((t=>{"未登入"===t.response.data.message&&(this.$store.commit("logout"),"/login"!==this.$route.path&&this.$router.push("/login")),this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}}),g=m,f=i(1001),v=(0,f.Z)(g,h,p,!1,null,null,null),b=v.exports},3158:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return M}});var s=i(1096),a=i(7179),n=i(5743),r=function(){var t=this,e=t._self._c;return"tab"===t.display?e("div",{staticClass:"show_tab",attrs:{id:"editPagesPhotolab"}},[e(s.Z,[e("div",{staticClass:"show"},[e("p",{staticClass:"mt-3"},[t._v("編輯模式")]),e(n.Z,{attrs:{color:"#677d35",rounded:"",mandatory:""},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(a.Z,{attrs:{value:"tab"}},[t._v("表格")]),e(a.Z,{attrs:{value:"img"}},[t._v("圖示")])],1)],1)]),e("ShowTab")],1):"img"===t.display?e("div",{staticClass:"show_img",attrs:{id:"editPagesPhotolab"}},[e(s.Z,[e("div",{staticClass:"show"},[e("p",{staticClass:"mt-3"},[t._v("編輯模式")]),e(n.Z,{attrs:{color:"#677d35",rounded:"",mandatory:""},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(a.Z,{attrs:{value:"tab"}},[t._v("表格")]),e(a.Z,{attrs:{value:"img"}},[t._v("圖示")])],1)],1)]),e("ShowImg")],1):t._e()},o=[],l=i(3385),c=i(5223),d=i(4944),u=i(3484),h=i(2570),p=i(6904),m=i(5057),g=i(2469),f=i(9868),v=i(5234),b=i(5617),w=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"show_img"}},[e(s.Z,[e(f.Z,{attrs:{elevation:"2",outlined:"",shaped:""}},[e("Photoswip",[e("vueWaterfallEasy",{attrs:{imgsArr:t.imgsArr},scopedSlots:t._u([{key:"default",fn:function(i){return e("div",{staticClass:"img-info"},[e(h.Z,{attrs:{"open-delay":"5",transition:"dialog-bottom-transition","max-width":"500px",eager:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:n}){return[e(a.Z,t._g(t._b({staticClass:"edit",attrs:{fab:"",text:"",depressed:"",absolute:"","x-small":""},on:{click:function(e){return t.edit(i)}}},"v-btn",n,!1),s),[e(m.Z,[t._v("mdi-pencil")])],1)]}},{key:"default",fn:function(s){return[e(p.Z,{on:{submit:function(e){return e.preventDefault(),t.onEditSubmit(i)}}},[e(l.Z,{staticClass:"editDialog"},[e(g.Z,{attrs:{src:i.value.src,width:"430px",height:"250px"}}),e(b.Z,{staticClass:"mt-5",attrs:{outlined:"",name:"input-7-4",label:"說明 (200字以內)",value:"",color:"#677d35","auto-grow":"",counter:"200",rows:"1"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("h5",[t._v("攝影師")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.photographer,callback:function(e){t.photographer=e},expression:"photographer"}},[e(d.Z,{attrs:{value:"GP"}},[t._v("GP")]),e(d.Z,{attrs:{value:"榮格"}},[t._v("榮格")]),e(d.Z,{attrs:{value:"壹壹"}},[t._v("壹壹")]),e(d.Z,{attrs:{value:"刷牙"}},[t._v("刷牙")])],1),e("h5",{staticClass:"mt-5"},[t._v("項目")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}},[e(d.Z,{attrs:{value:"婚紗"}},[t._v("婚紗")]),e(d.Z,{attrs:{value:"姊妹婚紗"}},[t._v("姊妹婚紗")]),e(d.Z,{attrs:{value:"孕媽咪"}},[t._v("孕媽咪")]),e(d.Z,{attrs:{value:"親子寫真"}},[t._v("親子寫真")]),e(d.Z,{attrs:{value:"情侶寫真"}},[t._v("情侶寫真")])],1),e(c.h7,[e(a.Z,{staticClass:"mt-5",attrs:{rounded:"",text:"",fab:"",depressed:"",left:"",plain:"",type:"submit"},on:{click:function(t){s.value=!1}}},[t._v("儲存")])],1)],1)],1)]}}],null,!0)}),e(a.Z,{staticClass:"del",attrs:{fab:"",text:"",depressed:"",absolute:"","x-small":""},on:{click:function(e){return t.del(i)}}},[e(m.Z,[t._v("mdi-delete-outline")])],1)],1)}}])},[e(g.Z,{directives:[{name:"pswp",rawName:"v-pswp",value:t.props,expression:"props"}],attrs:{src:t.props.src}}),e("div",{attrs:{slot:"waterfall-over"},slot:"waterfall-over"},[t._v("end")])],1)],1),e(a.Z,{attrs:{fab:"",bottom:"",left:"",absolute:""},on:{click:t.create}},[e(m.Z,[t._v("mdi-plus")])],1)],1),e(h.Z,{staticClass:"create",attrs:{"max-width":"500px","background-color":"#ffffff"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(p.Z,{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e(c.ZB,[e("img-inputer",{staticClass:"mx-auto",attrs:{icon:"img",size:"large",placeholder:"請選擇圖片","bottom-text":"點擊或拖曳更換圖片","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),e(b.Z,{attrs:{outlined:"",name:"input-7-4",label:"說明 (200字以內)",value:"",color:"#677d35","auto-grow":"",counter:"200",rows:"1"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("h5",[t._v("攝影師")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.photographer,callback:function(e){t.photographer=e},expression:"photographer"}},[e(d.Z,{attrs:{value:"GP"}},[t._v("GP")]),e(d.Z,{attrs:{value:"榮格"}},[t._v("榮格")]),e(d.Z,{attrs:{value:"壹壹"}},[t._v("壹壹")]),e(d.Z,{attrs:{value:"刷牙"}},[t._v("刷牙")])],1),e("h5",[t._v("項目")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}},[e(d.Z,{attrs:{value:"婚紗"}},[t._v("婚紗")]),e(d.Z,{attrs:{value:"姊妹婚紗"}},[t._v("姊妹婚紗")]),e(d.Z,{attrs:{value:"孕媽咪"}},[t._v("孕媽咪")]),e(d.Z,{attrs:{value:"親子寫真"}},[t._v("親子寫真")]),e(d.Z,{attrs:{value:"情侶寫真"}},[t._v("情侶寫真")])],1)],1),e(c.h7,[e(v.Z),e(a.Z,{attrs:{type:"submit",text:"",rounded:""},on:{click:function(e){t.dialog=!1}}},[t._v("送出")])],1)],1)],1)],1)],1)},A=[],x=(i(7658),i(3467)),y=i.n(x),_=i(4479),Z=i(2954);(0,Z.UF)("eager"),(0,Z.l7)("numeric",{..._.uR,message:"{_field_} needs to be {length} digits."}),(0,Z.l7)("required",{..._.C1,message:"{_field_} can not be empty"});var k={data(){return{headers:[{text:"預覽圖片",align:"start",sortable:!1,value:"src"},{text:"攝影師",value:"photographer",sortable:!1},{text:"項目",value:"project",sortable:!1},{text:"標題",value:"title",sortable:!1},{text:"",value:"delBtn",sortable:!1}],dialog:!1,items:[],project:"",photographer:"",description:"",image:null,photoSize:"",imgsArr:[],fetchImgsArr:[],group:0,pullDownDistance:0,props:"",width:"",height:"",display:"tab"}},computed:{user(){return this.$store.state.user}},components:{ValidationProvider:Z.d_,ValidationObserver:Z._j,vueWaterfallEasy:y()},methods:{create(){this.dialog=!0,this.image=null,this.photographer="",this.project="",this.description=""},onSubmit(){if(this.image.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.image.type.includes("image")){const t=new FormData;t.append("image",this.image),t.append("photographer",this.photographer),t.append("project",this.project),t.append("description",this.description),this.axios.post("https://gp-photolab.onrender.com/photos/",t).then((t=>{t.data.success?(t.data.result.src="https://gp-photolab.onrender.com/photos/file/"+t.data.result.file,t.data.result.edit=!1,t.data.result.imgdialog=!1,t.data.result.title=t.data.result.description,delete t.data.result.description,this.$swal({title:"上傳成功",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),this.imgsArr.splice(0,0,t.data.result),console.log(t.data.result),this.image=null,this.photographer="",this.project="",this.description=""):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"})},onEditSubmit(t){this.axios.patch("https://gp-photolab.onrender.com/photos/"+t.value._id,this.$data).then((e=>{e.data.success?(t.value.edit=!1,t.value.project=e.data.result.project,t.value.photographer=e.data.result.photographer,t.value.description=e.data.result.description,this.$swal({title:"編輯成功",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),console.log(this.$data)):this.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))},edit(t){t.value.edit=!0,t.value.imgdialog=!0,this.photographer=t.value.photographer,this.project=t.value.project,"undefined"===t.value.description?this.description="":this.description=t.value.description},del(t){this.$swal({title:"是否要刪除",showDenyButton:!0,confirmButtonText:"Yes"}).then((e=>{e.isConfirmed&&this.axios.delete("https://gp-photolab.onrender.com/photos/"+t.value._id).then((e=>{e.data.success?(this.imgsArr.splice(t.index,1),this.$swal({title:"刪除照片",showConfirmButton:!1,timerProgressBar:!0,timer:1e3})):this.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}))}},mounted(){this.axios.get("https://gp-photolab.onrender.com/photos/").then((t=>{t.data.success?(this.imgsArr=t.data.result.map((t=>(t.src="https://gp-photolab.onrender.com/photos/file/"+t.file,t.edit=!1,t.imgdialog=!1,t.title=t.description,t))),this.imgsArr.reverse(),console.log(this.imgsArr)):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{"未登入"===t.response.data.message&&(this.$store.commit("logout"),"/login"!==this.$route.path&&this.$router.push("/login")),this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}},C=k,B=i(1001),S=(0,B.Z)(C,w,A,!1,null,null,null),$=S.exports,D=i(384),E=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"show_tab"}},[e(s.Z,[e(a.Z,{staticClass:"create mt-15",attrs:{width:"200",dark:"",rounded:""},on:{click:t.create}},[t._v("新增圖片")]),e(D.Z,{staticClass:"elevation-1 mt-15",attrs:{headers:t.headers,items:t.imgsArr},scopedSlots:t._u([{key:"item.src",fn:function({item:t}){return[e(g.Z,{staticClass:"ma-3",attrs:{src:t.src,height:"90px",width:"150px"}})]}},{key:"item.title",fn:function({item:i}){return[e("span",{staticClass:"titlee"},[t._v(t._s(i.title))])]}},{key:"item.delBtn",fn:function({item:i,index:s}){return[e(a.Z,{staticClass:"ma-3",attrs:{rounded:"",dark:"",color:"rgba(103, 125, 53, 0.8)"},on:{click:function(e){return t.edit(i)}}},[t._v("編輯")]),e(a.Z,{staticClass:"ma-3",attrs:{rounded:"",dark:"",color:"rgba(212, 97, 68, 0.8)"},on:{click:function(e){return t.del(i,s)}}},[t._v("刪除")])]}}])}),e(h.Z,{staticClass:"create",attrs:{"max-width":"500px","background-color":"#ffffff"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(p.Z,{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e(c.ZB,[e("img-inputer",{staticClass:"mx-auto",attrs:{icon:"img",size:"large",placeholder:"請選擇圖片","bottom-text":"點擊或拖曳更換圖片","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),e(b.Z,{attrs:{outlined:"",name:"input-7-4",label:"說明 (200字以內)",value:"",color:"#677d35","auto-grow":"",counter:"200",rows:"1"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("h5",[t._v("攝影師")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.photographer,callback:function(e){t.photographer=e},expression:"photographer"}},[e(d.Z,{attrs:{value:"GP"}},[t._v("GP")]),e(d.Z,{attrs:{value:"榮格"}},[t._v("榮格")]),e(d.Z,{attrs:{value:"壹壹"}},[t._v("壹壹")]),e(d.Z,{attrs:{value:"刷牙"}},[t._v("刷牙")])],1),e("h5",[t._v("項目")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}},[e(d.Z,{attrs:{value:"婚紗"}},[t._v("婚紗")]),e(d.Z,{attrs:{value:"姊妹婚紗"}},[t._v("姊妹婚紗")]),e(d.Z,{attrs:{value:"孕媽咪"}},[t._v("孕媽咪")]),e(d.Z,{attrs:{value:"親子寫真"}},[t._v("親子寫真")]),e(d.Z,{attrs:{value:"情侶寫真"}},[t._v("情侶寫真")])],1)],1),e(c.h7,[e(v.Z),e(a.Z,{attrs:{type:"submit",text:"",rounded:""},on:{click:function(e){t.dialog=!1}}},[t._v("送出")])],1)],1)],1),e(h.Z,{staticClass:"create",attrs:{"background-color":"#ffffff","open-delay":"5",transition:"dialog-bottom-transition","max-width":"500px",eager:""},model:{value:t.imgdialog,callback:function(e){t.imgdialog=e},expression:"imgdialog"}},[e(p.Z,{on:{submit:function(e){return e.preventDefault(),t.onEditSubmit(t.item)}}},[e(c.ZB,[e(g.Z,{attrs:{src:t.src,width:"430px",height:"250px"}}),e(b.Z,{staticClass:"mt-5",attrs:{outlined:"",name:"input-7-4",label:"說明 (200字以內)",value:"",color:"#677d35","auto-grow":"",counter:"200",rows:"1"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("h5",[t._v("攝影師")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.photographer,callback:function(e){t.photographer=e},expression:"photographer"}},[e(d.Z,{attrs:{value:"GP"}},[t._v("GP")]),e(d.Z,{attrs:{value:"榮格"}},[t._v("榮格")]),e(d.Z,{attrs:{value:"壹壹"}},[t._v("壹壹")]),e(d.Z,{attrs:{value:"刷牙"}},[t._v("刷牙")])],1),e("h5",[t._v("項目")]),e(u.Z,{attrs:{mandatory:""},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}},[e(d.Z,{attrs:{value:"婚紗"}},[t._v("婚紗")]),e(d.Z,{attrs:{value:"姊妹婚紗"}},[t._v("姊妹婚紗")]),e(d.Z,{attrs:{value:"孕媽咪"}},[t._v("孕媽咪")]),e(d.Z,{attrs:{value:"親子寫真"}},[t._v("親子寫真")]),e(d.Z,{attrs:{value:"情侶寫真"}},[t._v("情侶寫真")])],1)],1),e(c.h7,[e(v.Z),e(a.Z,{staticClass:"mt-5",attrs:{rounded:"",text:"",fab:"",depressed:"",left:"",plain:"",type:"submit"},on:{click:function(e){t.imgdialog=!1}}},[t._v("儲存")])],1)],1)],1)],1)],1)},I=[];(0,Z.UF)("eager"),(0,Z.l7)("numeric",{..._.uR,message:"{_field_} needs to be {length} digits."}),(0,Z.l7)("required",{..._.C1,message:"{_field_} can not be empty"});var N={data(){return{headers:[{text:"預覽圖片",align:"start",sortable:!1,value:"src"},{text:"攝影師",value:"photographer",sortable:!1},{text:"項目",value:"project",sortable:!1},{text:"標題",value:"title",sortable:!1},{text:"",value:"delBtn",sortable:!1}],dialog:!1,imgdialog:!1,items:[],project:"",photographer:"",description:"",image:null,photoSize:"",imgsArr:[],fetchImgsArr:[],group:0,pullDownDistance:0,item:[],display:"tab",src:""}},computed:{user(){return this.$store.state.user}},components:{ValidationProvider:Z.d_,ValidationObserver:Z._j},methods:{create(){this.dialog=!0,this.image=null,this.photographer="",this.project="",this.description=""},onSubmit(){if(this.image.size>1048576)this.$swal({icon:"error",title:"錯誤",text:"圖片太大"});else if(this.image.type.includes("image")){const t=new FormData;t.append("image",this.image),t.append("photographer",this.photographer),t.append("project",this.project),t.append("description",this.description),this.axios.post("https://gp-photolab.onrender.com/photos/",t).then((t=>{t.data.success?(t.data.result.src="https://gp-photolab.onrender.com/photos/file/"+t.data.result.file,t.data.result.edit=!1,t.data.result.imgdialog=!1,t.data.result.title=t.data.result.description,delete t.data.result.description,this.$swal({title:"上傳成功",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),this.imgsArr.splice(0,0,t.data.result),console.log(t.data.result),this.image=null,this.photographer="",this.project="",this.description=""):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}else this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"})},onEditSubmit(t){this.axios.patch("https://gp-photolab.onrender.com/photos/"+t._id,this.$data).then((e=>{e.data.success?(t.edit=!1,t.project=e.data.result.project,t.photographer=e.data.result.photographer,t.title=e.data.result.description,this.$swal({title:"編輯成功",showConfirmButton:!1,timerProgressBar:!0,timer:1e3}),console.log(t.description),console.log(e.data.result.description)):this.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))},edit(t){this.imgdialog=!0,this.photographer=t.photographer,this.project=t.project,this.src=t.src,this.item=t,"undefined"===t.description?this.description="":this.description=t.description},del(t,e){this.$swal({title:"是否要刪除",showDenyButton:!0,confirmButtonText:"Yes"}).then((i=>{i.isConfirmed&&this.axios.delete("https://gp-photolab.onrender.com/photos/"+t._id).then((t=>{t.data.success?(this.imgsArr.splice(e,1),this.$swal({title:"刪除照片",showConfirmButton:!1,timerProgressBar:!0,timer:1e3})):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}))}},mounted(){this.axios.get("https://gp-photolab.onrender.com/photos/").then((t=>{t.data.success?(this.imgsArr=t.data.result.map((t=>(t.src="https://gp-photolab.onrender.com/photos/file/"+t.file,t.edit=!1,t.imgdialog=!1,t.title=t.description,t))),this.imgsArr.reverse(),console.log(this.imgsArr)):this.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((t=>{"未登入"===t.response.data.message&&(this.$store.commit("logout"),"/login"!==this.$route.path&&this.$router.push("/login")),this.$swal({icon:"error",title:"錯誤",text:t.response.data.message})}))}},P=N,R=(0,B.Z)(P,E,I,!1,null,null,null),T=R.exports,j={name:"EditPagesPhotolab",data(){return{display:"tab"}},components:{ShowImg:$,ShowTab:T}},z=j,F=(0,B.Z)(z,r,o,!1,null,null,null),M=F.exports},5743:function(t,e,i){"use strict";i.d(e,{Z:function(){return r}});var s=i(3455),a=i(8914),n=i(4987),r=(0,n.Z)(s.Z,a.Z).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes(){return{...s.Z.options.computed.classes.call(this),"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile,...this.themeClasses}}},methods:{genData(){const t=this.setTextColor(this.color,{...s.Z.options.methods.genData.call(this)});return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}})},5617:function(t,e,i){"use strict";i.d(e,{Z:function(){return r}});var s=i(5251),a=i(4987);const n=(0,a.Z)(s.Z);var r=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"},genInput(){const t=s.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){s.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},3467:function(t){!function(e,i){t.exports=i()}("undefined"!=typeof self&&self,(function(){return function(t){function e(s){if(i[s])return i[s].exports;var a=i[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e){function i(t,e){var i=t[1]||"",a=t[3];if(!a)return i;if(e&&"function"==typeof btoa){var n=s(a);return[i].concat(a.sources.map((function(t){return"/*# sourceURL="+a.sourceRoot+t+" */"}))).concat([n]).join("\n")}return[i].join("\n")}function s(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=i(e,t);return e[2]?"@media "+e[2]+"{"+s+"}":s})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},a=0;a<this.length;a++){var n=this[a][0];"number"==typeof n&&(s[n]=!0)}for(a=0;a<t.length;a++){var r=t[a];"number"==typeof r[0]&&s[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),e.push(r))}},e}},function(t,e,i){function s(t){for(var e=0;e<t.length;e++){var i=t[e],s=d[i.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](i.parts[a]);for(;a<i.parts.length;a++)s.parts.push(n(i.parts[a]));s.parts.length>i.parts.length&&(s.parts.length=i.parts.length)}else{var r=[];for(a=0;a<i.parts.length;a++)r.push(n(i.parts[a]));d[i.id]={id:i.id,refs:1,parts:r}}}}function a(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function n(t){var e,i,s=document.querySelector("style["+v+'~="'+t.id+'"]');if(s){if(m)return g;s.parentNode.removeChild(s)}if(b){var n=p++;s=h||(h=a()),e=r.bind(null,s,n,!1),i=r.bind(null,s,n,!0)}else s=a(),e=o.bind(null,s),i=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else i()}}function r(t,e,i,s){var a=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=w(e,a);else{var n=document.createTextNode(a),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(n,r[e]):t.appendChild(n)}}function o(t,e){var i=e.css,s=e.media,a=e.sourceMap;if(s&&t.setAttribute("media",s),f.ssrId&&t.setAttribute(v,e.id),a&&(i+="\n/*# sourceURL="+a.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=i(8),d={},u=l&&(document.head||document.getElementsByTagName("head")[0]),h=null,p=0,m=!1,g=function(){},f=null,v="data-vue-ssr-id",b="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,i,a){m=i,f=a||{};var n=c(t,e);return s(n),function(e){for(var i=[],a=0;a<n.length;a++){var r=n[a],o=d[r.id];o.refs--,i.push(o)}e?(n=c(t,e),s(n)):n=[];for(a=0;a<i.length;a++){o=i[a];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete d[o.id]}}}};var w=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e,i,s,a,n){var r,o=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(r=t,o=t.default);var c,d="function"==typeof o?o.options:o;if(e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),i&&(d.functional=!0),a&&(d._scopeId=a),n?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=c):s&&(c=s),c){var u=d.functional,h=u?d.render:d.beforeCreate;u?(d._injectStyles=c,d.render=function(t,e){return c.call(e),h(t,e)}):d.beforeCreate=h?[].concat(h,c):[c]}return{esModule:r,exports:o,options:d}}},function(t,e,i){"use strict";var s=i(9);e.a={name:"vue-waterfall-easy",components:{alink:s.a},props:{width:{type:Number},height:{type:[Number,String]},reachBottomDistance:{type:Number,default:20},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},maxCols:{type:Number,default:5},imgsArr:{type:Array,required:!0},srcKey:{type:String,default:"src"},hrefKey:{type:String,default:"href"},imgWidth:{type:Number,default:240},isRouterLink:{type:Boolean,default:!1},linkRange:{type:String,default:"card"},loadingTimeOut:{type:Number,default:500},cardAnimationClass:{type:[String],default:"default-card-animation"},enablePullDownEvent:{type:Boolean,default:!1}},data:function(){return{msg:"this is from vue-waterfall-easy.vue",isMobile:!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),isPreloading:!0,isPreloading_c:!0,imgsArr_c:[],loadedCount:0,cols:NaN,imgBoxEls:null,beginIndex:0,colsHeightArr:[],LoadingTimer:null,isFirstLoad:!0,over:!1}},computed:{colWidth:function(){return this.imgWidth+this.gap},imgWidth_c:function(){return this.isMobile?window.innerWidth/2-this.mobileGap:this.imgWidth},hasLoadingSlot:function(){return!!this.$scopedSlots.loading}},mounted:function(){var t=this;this.bindClickEvent(),this.loadingMiddle(),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",(function(){t.isFirstLoad=!1,t.imgsArr_c=t.imgsArr.concat([]),t.$nextTick((function(){t.isPreloading=!1,t.imgBoxEls=t.$el.getElementsByClassName("img-box"),t.waterfall()}))})),this.isMobile||this.width||window.addEventListener("resize",this.response),this.isMobile&&this.enablePullDownEvent&&this.pullDown(),this.scroll()},beforeDestroy:function(){window.removeEventListener("resize",this.response)},watch:{isPreloading:function(t,e){var i=this;t?setTimeout((function(){i.isPreloading&&(i.isPreloading_c=!0)}),this.loadingTimeOut):this.isPreloading_c=!1},imgsArr:function(t,e){(this.imgsArr_c.length>t.length||this.imgsArr_c.length>0&&t[0]&&!t[0]._height)&&this.reset(),this.preload()}},methods:{preload:function(t,e){var i=this;this.imgsArr.forEach((function(t,e){if(!(e<i.loadedCount)){if(!t[i.srcKey])return i.imgsArr[e]._height="0",void(++i.loadedCount==i.imgsArr.length&&i.$emit("preloaded"));var s=new Image;s.src=t[i.srcKey],s.onload=s.onerror=function(t){i.loadedCount++,i.imgsArr[e]._height="load"==t.type?Math.round(i.imgWidth_c/(s.width/s.height)):i.isMobile?i.imgWidth_c:i.imgWidth,"error"==t.type&&(i.imgsArr[e]._error=!0,i.$emit("imgError",i.imgsArr[e])),i.loadedCount==i.imgsArr.length&&i.$emit("preloaded")}}}))},calcuCols:function(){var t=this.width?this.width:window.innerWidth,e=parseInt(t/this.colWidth);return e=0===e?1:e,this.isMobile?2:e>this.maxCols?this.maxCols:e},waterfall:function(){if(this.imgBoxEls){var t,e,i,s=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0==this.beginIndex&&(this.colsHeightArr=[]);for(var a=this.beginIndex;a<this.imgsArr.length;a++){if(!this.imgBoxEls[a])return;if(i=this.imgBoxEls[a].offsetHeight,a<this.cols)this.colsHeightArr.push(i),t=0,e=a*s;else{var n=Math.min.apply(null,this.colsHeightArr),r=this.colsHeightArr.indexOf(n);t=n,e=r*s,this.colsHeightArr[r]=n+i}this.imgBoxEls[a].style.left=e+"px",this.imgBoxEls[a].style.top=t+"px"}this.beginIndex=this.imgsArr.length}},response:function(){var t=this.cols;this.cols=this.calcuCols(),t!==this.cols&&(this.beginIndex=0,this.waterfall(),this.over&&this.setOverTipPos())},scrollFn:function(){var t=this.$refs.scrollEl;if(!this.isPreloading){var e=Math.min.apply(null,this.colsHeightArr);t.scrollTop+t.offsetHeight>e-this.reachBottomDistance&&(this.isPreloading=!0,this.$emit("scrollReachBottom"))}},scroll:function(){this.$refs.scrollEl.addEventListener("scroll",this.scrollFn)},waterfallOver:function(){this.$refs.scrollEl.removeEventListener("scroll",this.scrollFn),this.isPreloading=!1,this.over=!0,this.setOverTipPos()},setOverTipPos:function(){var t=this,e=Math.max.apply(null,this.colsHeightArr);this.$nextTick((function(){t.$refs.over.style.top=e+"px"}))},bindClickEvent:function(){var t=this;this.$el.querySelector(".vue-waterfall-easy").addEventListener("click",(function(e){var i=e.target;if(-1===e.target.className.indexOf("over")&&-1==i.className.indexOf("img-box")){for(;-1==i.className.indexOf("img-inner-box");)i=i.parentNode;var s=i.getAttribute("data-index");t.$emit("click",e,{index:s,value:t.imgsArr_c[s]})}}))},pullDown:function(){var t,e=this,i=this.$el.querySelector(".vue-waterfall-easy-scroll");i.addEventListener("touchmove",(function(s){if(0===i.scrollTop){var a=s.changedTouches[0];t||(t=a.pageY);var n=a.pageY-t;n>0&&s.preventDefault(),e.$emit("pullDownMove",n)}})),i.addEventListener("touchend",(function(s){0===i.scrollTop&&(t=NaN,e.$emit("pullDownEnd"))}))},loadingMiddle:function(){var t=this.$el.querySelector(".vue-waterfall-easy-scroll"),e=t.offsetWidth-t.clientWidth;this.$el.querySelector(".loading").style.marginLeft=-e/2+"px"},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0,this.scroll(),this.over=!1}}}},function(t,e,i){"use strict";e.a={name:"alink",props:["to"],data:function(){return{msg:"this is from alink.vue"}},methods:{}}},function(t,e,i){"use strict";function s(t){r||i(6)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),n=i(13),r=!1,o=i(2),l=s,c=o(a.a,n.a,!1,l,"data-v-ded6b974",null);c.options.__file="src\\vue-waterfall-easy\\vue-waterfall-easy.vue",e.default=c.exports},function(t,e,i){var s=i(7);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),i(1)("5fd04388",s,!1,{})},function(t,e,i){e=t.exports=i(0)(!1),e.push([t.i,"\n.vue-waterfall-easy-container[data-v-ded6b974] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy-scroll[data-v-ded6b974] {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    -webkit-overflow-scrolling: touch;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy[data-v-ded6b974] {\n    position: absolute;\n    width: 100%;\n}\n@-webkit-keyframes show-card-data-v-ded6b974 {\n0% {\n    -webkit-transform: scale(0.5);\n            transform: scale(0.5);\n}\n100% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n@keyframes show-card-data-v-ded6b974 {\n0% {\n    -webkit-transform: scale(0.5);\n            transform: scale(0.5);\n}\n100% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n.vue-waterfall-easy-container .vue-waterfall-easy > .img-box[data-v-ded6b974] {\n      position: absolute;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      width: 50%;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy > .img-box.default-card-animation[data-v-ded6b974] {\n      -webkit-animation: show-card-data-v-ded6b974 0.4s;\n              animation: show-card-data-v-ded6b974 0.4s;\n      -webkit-transition: left 0.6s, top 0.6s;\n      transition: left 0.6s, top 0.6s;\n      -webkit-transition-delay: 0.1s;\n              transition-delay: 0.1s;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy a[data-v-ded6b974] {\n      display: block;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy a.img-inner-box[data-v-ded6b974] {\n      -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n      border-radius: 4px;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy .__err__ .img-wraper[data-v-ded6b974] {\n      background-image: url(data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk1M0JCM0QwNkVFNDExRThCNTJCQUQ2RDFGQzg0NzIxIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk1M0JCM0NGNkVFNDExRThCNTJCQUQ2RDFGQzg0NzIxIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTYwRUMyMDE2RUUzMTFFOEJCRTU5RTFDODg1ODgwMjYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTYwRUMyMDI2RUUzMTFFOEJCRTU5RTFDODg1ODgwMjYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcfHhcaGhoaFx4eIyUnJSMeLy8zMy8vQEBAQEBAQEBAQEBAQEBAAREPDxETERUSEhUUERQRFBoUFhYUGiYaGhwaGiYwIx4eHh4jMCsuJycnLis1NTAwNTVAQD9AQEBAQEBAQEBAQED/wAARCACRAJEDASIAAhEBAxEB/8QAZQAAAwEBAQAAAAAAAAAAAAAAAAIDAQQHAQEAAAAAAAAAAAAAAAAAAAAAEAACAQMDBAEFAAMBAAAAAAAAAQIRMQMhQRJRYYEycZHBIkITsdFSYhEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9AAAAAMFnNQWt9kAwkssVbV9CTnKb10XQVtLSyAd5ZuzURW27yfhmX9RlDI+wD4Vf/ZVi41SKCdeNI3YEnOXJtOiBZZr/wBGcMi2Ft7AXjli76PoOcqael0Mpyg9NV0A6QEhNTWl90MBoAAAAAAGGiTlxjXfZAZkycdEqyI3q26sOrd92CTm6bbsA1boh1i3lqPGKiqIZAYklYHY0x6tIDY2B3NdjEBgNJ3NACTxbx0E1TozoYsoqSowI2o06MtjyctGqSItODptsw6NX2YHSaJCXKNd90OAAAAYznnLnJvZWK5pUjRXloiNdwCjk0l9S0YqKohcSpGrvLUcDUBLK23x23FWNtVSAuHch/KXQP5PoBdqq77GJ1XfczFVKjVBcuPk6rXqBQCH8n0D+UugFwZD+bV1oNif5OOzQDyipKjI0cW0/qXYmVVjVXjqAkZcHXZ3OhHNXcthlWNHeOjAoAABDLKs6bISlWl1Busm+42Jfm30At2BmI1gRy+3gpD1XwTy+3gpH1QDASyt8uKdFuJRw1iwOjdBKy+TIutGbK3kAAxtJNuwiywdmA7s/glj9/BV04unQli9l8AWDsBjAhSja6D4pUnTZmZV+afUVOkk+4HUBgAc0bD4v2+fsJGw+L9vn7AVQMEDAjl9vBSHqvgnl9vBSHqvgDJwbfJC8JPSlEO5wTo3qMnUDEqNGz0jXoD08BRSXyBB/m6u2xvFPQ1qjoDAVNxqv1ZuJUnT5BGw9/AFQYAwJZf1+fsJKw+X9fn7CSsB0AAAc7VG13GxP82uoZFSbezFWkkwOgGCBgRy15adDZTaioq7QZPfwZQDFFfPc2MnB0vE1AwCc+WituPjaS4kzU6agPkS9hEVeqJJU0AAh7+ACHv4AqAAwI5X+aXQVKrS7g3WTY2ONZp7IC9AAAJ5lWNf+dSV1XqdL1VGc8lxk47bAUxyqqO60GIpuL5LyuxZNNVVtmAmVfkpbbi1RYAI1QVRYAI1QJ1aRYzdAbJ8Y1I1RZggI1SNxL8uW1NCoAYxckqKiu9Bm0lV23ZFtyfJ+F2Ayyr0K4VSNf8ArUnFcpKO250LRUQABoAYLkhzXdWHMA5u26uNGXF9tx8uOusfYlbTcC6aaqrdTTnTlHVfQrHJF6PRsBwAAC5i9vg0xbgaAIAAxtJVduosskVotWiTcpav6ANKXJ9the27sF9NyuLHTWXsA2OHBd3cYDQAAAAAAAwSeNS1syhgHNRxdJfUK10ujoaTuJLCrp0Amm1Ztdhv6z3Sfkxwmu4leqoBT+1P1f8AkZy4469daEaopllRqPRAH9ZOyp5Fbbu2+xmuyGUJvsAtaaWQUcnSP1Kxwq7dR0krALDGo63Y4GgAAAAAAAAAAAAAAAAAshJ7AAGK6B3YABsNx4gADAAAAAAAAAAAAAf/2Q==);\n      background-repeat: no-repeat;\n      background-position: center;\n      background-size: 50% 50%;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy .__err__ .img-wraper img[data-v-ded6b974] {\n        display: none;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy a.img-wraper > img[data-v-ded6b974] {\n      width: 100%;\n      display: block;\n      border: none;\n}\n.vue-waterfall-easy-container .vue-waterfall-easy .over[data-v-ded6b974] {\n      position: absolute;\n      width: 100%;\n      text-align: center;\n      font-size: 12px;\n      line-height: 1.6;\n      color: #aaa;\n}\n.vue-waterfall-easy-container > .loading.first[data-v-ded6b974] {\n    bottom: 50%;\n    -webkit-transform: translate(-50%, 50%);\n            transform: translate(-50%, 50%);\n}\n.vue-waterfall-easy-container > .loading[data-v-ded6b974] {\n    position: absolute;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    bottom: 6px;\n    z-index: 999;\n}\n@-webkit-keyframes ball-beat-data-v-ded6b974 {\n50% {\n    opacity: 0.2;\n    -webkit-transform: scale(0.75);\n            transform: scale(0.75);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n@keyframes ball-beat-data-v-ded6b974 {\n50% {\n    opacity: 0.2;\n    -webkit-transform: scale(0.75);\n            transform: scale(0.75);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n}\n.vue-waterfall-easy-container > .loading.ball-beat > .dot[data-v-ded6b974] {\n      vertical-align: bottom;\n      background-color: #4b15ab;\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n      margin: 3px;\n      -webkit-animation-fill-mode: both;\n              animation-fill-mode: both;\n      display: inline-block;\n      -webkit-animation: ball-beat-data-v-ded6b974 0.7s 0s infinite linear;\n              animation: ball-beat-data-v-ded6b974 0.7s 0s infinite linear;\n}\n.vue-waterfall-easy-container > .loading.ball-beat > .dot[data-v-ded6b974]:nth-child(2n-1) {\n      -webkit-animation-delay: 0.35s;\n              animation-delay: 0.35s;\n}\n",""])},function(t,e){t.exports=function(t,e){for(var i=[],s={},a=0;a<e.length;a++){var n=e[a],r=n[0],o=n[1],l=n[2],c=n[3],d={id:t+":"+a,css:o,media:l,sourceMap:c};s[r]?s[r].parts.push(d):i.push(s[r]={id:r,parts:[d]})}return i}},function(t,e,i){"use strict";function s(t){r||i(10)}var a=i(4),n=i(12),r=!1,o=i(2),l=s,c=o(a.a,n.a,!1,l,null,null);c.options.__file="src\\vue-waterfall-easy\\components\\alink.vue",e.a=c.exports},function(t,e,i){var s=i(11);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),i(1)("75b4b0a0",s,!1,{})},function(t,e,i){e=t.exports=i(0)(!1),e.push([t.i,"",""])},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("a",{staticClass:"alink",attrs:{href:t.to,target:"_blank"}},[t._t("default")],2)},a=[];s._withStripped=!0;var n={render:s,staticRenderFns:a};e.a=n},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-waterfall-easy-container",style:{width:t.width&&!t.isMobile?t.width+"px":"",height:parseFloat(t.height)==t.height?t.height+"px":t.height}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreloading_c,expression:"isPreloading_c"}],staticClass:"loading ball-beat",class:{first:t.isFirstLoad}},[t._t("loading",null,{isFirstLoad:t.isFirstLoad}),t._l(t.loadingDotCount,(function(e){return t.hasLoadingSlot?t._e():i("div",{staticClass:"dot",style:t.loadingDotStyle})}))],2),i("div",{ref:"scrollEl",staticClass:"vue-waterfall-easy-scroll"},[t._t("waterfall-head"),i("div",{staticClass:"vue-waterfall-easy",style:t.isMobile?"":{width:t.colWidth*t.cols+"px",left:"50%",marginLeft:-1*t.colWidth*t.cols/2+"px"}},[t._l(t.imgsArr_c,(function(e,s){return i("div",{staticClass:"img-box",class:[t.cardAnimationClass,{__err__:e._error}],style:{padding:(t.isMobile?t.mobileGap:t.gap)/2+"px",width:t.isMobile?"":t.colWidth+"px"}},[i(t.isRouterLink&&"card"==t.linkRange?"router-link":"alink",{tag:"component",staticClass:"img-inner-box",attrs:{"data-index":s,to:"card"==t.linkRange&&e[t.hrefKey]}},[e[t.srcKey]?i(t.isRouterLink&&"img"==t.linkRange?"router-link":"alink",{tag:"component",staticClass:"img-wraper",style:{width:t.imgWidth_c+"px",height:!!e._height&&e._height+"px"},attrs:{to:"img"==t.linkRange&&e[t.hrefKey]}},[i("img",{attrs:{src:e[t.srcKey]}})]):t._e(),t._t("default",null,{index:s,value:e})],2)],1)})),t.over?i("div",{ref:"over",staticClass:"over"},[t._t("waterfall-over",[t._v("被你看光了")])],2):t._e()],2)],2)])},a=[];s._withStripped=!0;var n={render:s,staticRenderFns:a};e.a=n}]).default}))}}]);
//# sourceMappingURL=editPages.de61dc98.js.map