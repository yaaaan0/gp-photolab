"use strict";(self["webpackChunkphotolab"]=self["webpackChunkphotolab"]||[]).push([[923],{5491:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"userData"}},[t("UData")],1)},a=[],i=s(1096),o=s(8819),l=s(7179),n=s(3385),u=s(5223),d=s(5057),h=s(5251),c=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"uData"}},[t(i.Z,[t(n.Z,[t("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function({invalid:s}){return[t(o.Z,{attrs:{size:"100"}},[t(d.Z,{attrs:{size:"100"}},[e._v("mdi-account-circle")])],1),t(u.ZB,[t("validation-provider",{attrs:{name:"Nmae",rules:"required|max:10"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t(h.Z,{attrs:{color:"#000000",filled:"",rounded:"",readonly:"",prefix:" 會員帳號｜"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})]}}],null,!0)}),t("validation-provider",{attrs:{name:"Nmae",rules:"required|max:10"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t(h.Z,{class:{editColor:e.editColor},attrs:{color:"#000000","error-messages":s,filled:"",rounded:"",readonly:e.readonly,prefix:" 會員姓名｜"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})]}}],null,!0)}),t("validation-provider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t(h.Z,{class:{editColor:e.editColor},attrs:{color:"#000000","error-messages":s,filled:"",rounded:"",readonly:e.readonly,prefix:" 會員信箱｜"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}],null,!0)}),t("validation-provider",{attrs:{name:"PhoneNumber",rules:"required|digits:10"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t(h.Z,{class:{editColor:e.editColor},attrs:{color:"#000000","error-messages":s,filled:"",rounded:"",readonly:e.readonly,prefix:" 手機號碼｜"},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}})]}}],null,!0)})],1),t(u.h7,[e.onEdit?t(l.Z,{staticClass:"edit",attrs:{rounded:"",dark:""},on:{click:e.edit}},[t(d.Z,[e._v("mdi-pencil")]),t("p",[e._v("編輯")])],1):e._e(),e.onEdit?e._e():t(l.Z,{staticClass:"save",attrs:{disabled:s,rounded:"",dark:""},on:{click:e.save}},[t(d.Z,[e._v("mdi-check-circle-outline")]),t("p",[e._v("儲存")])],1),e.onEdit?e._e():t(l.Z,{staticClass:"cancel",attrs:{rounded:"",dark:""},on:{click:e.cancel}},[t(d.Z,[e._v("mdi-close-circle-outline")]),t("p",[e._v("取消")])],1)],1)]}}])})],1)],1)],1)},m=[],p=(s(7658),s(4479)),f=s(2954);(0,f.UF)("eager"),(0,f.l7)("digits",{...p.nz,message:"{_field_} needs to be {length} digits."}),(0,f.l7)("required",{...p.C1,message:"{_field_} can not be empty"}),(0,f.l7)("max",{...p.Fp,message:"{_field_} may not be greater than {length} characters"}),(0,f.l7)("min",{...p.VV,message:"{_field_} at least {length} characters"}),(0,f.l7)("regex",{...p.Sz,message:"{_field_} must be valid"}),(0,f.l7)("email",{...p.Do,message:"{_field_} must be valid"});var v={data(){return{account:this.$store.state.user.account,name:this.$store.state.user.name,email:this.$store.state.user.email,phoneNumber:this.$store.state.user.phoneNumber,onEdit:!0,readonly:!0,editColor:!1}},computed:{user(){return this.$store.state.user}},components:{ValidationProvider:f.d_,ValidationObserver:f._j},methods:{edit(){this.onEdit=!1,this.readonly=!1,this.text=!0,this.editColor=!0},cancel(){this.onEdit=!0,this.readonly=!0,this.editColor=!1,this.name=this.$store.state.user.name,this.email=this.$store.state.user.email,this.phoneNumber=this.$store.state.user.phoneNumber},save(){this.onEdit=!0,this.readonly=!0,this.editColor=!1,this.axios.patch("https://gp-photolab.onrender.com/users/"+this.$store.state.user.id,this.$data).then((e=>{e.data.success?(this.$store.state.user.name=e.data.result.name,this.$store.state.user.email=e.data.result.email,this.$store.state.user.phoneNumber=e.data.result.phoneNumber,this.$swal({icon:"success",title:"資料更新",showConfirmButton:!1,timer:1e3})):(this.$swal({icon:"error",title:"發生錯誤",text:e.data.message}),this.name=this.$store.state.user.name,this.email=this.$store.state.user.email,this.phoneNumber=this.$store.state.user.phoneNumber)})).catch((e=>{this.$swal({icon:"error",title:"發生錯誤",text:e.response.data.message}),this.name=this.$store.state.user.name,this.email=this.$store.state.user.email,this.phoneNumber=this.$store.state.user.phoneNumber}))}},mounted(){this.axios.get("https://gp-photolab.onrender.com/users/"+this.user.id).then((e=>{e.data.success?(this.name=e.data.result.name,this.email=e.data.result.email,this.phoneNumber=e.data.result.phoneNumber):this.$swal({icon:"error",title:"錯誤",text:e.data.message})})).catch((e=>{"未登入"===e.response.data.message&&(this.$store.commit("logout"),"/login"!==this.$route.path&&this.$router.push("/login")),this.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))}},b=v,g=s(1001),_=(0,g.Z)(b,c,m,!1,null,null,null),$=_.exports,k={name:"UserData",components:{UData:$}},y=k,x=(0,g.Z)(y,r,a,!1,null,null,null),Z=x.exports},8819:function(e,t,s){s.d(t,{Z:function(){return n}});var r=s(8914),a=s(9196),i=s(3960),o=s(1050),l=s(4987),n=(0,l.Z)(r.Z,a.Z,i.Z).extend({name:"v-avatar",props:{left:Boolean,right:Boolean,size:{type:[Number,String],default:48}},computed:{classes(){return{"v-avatar--left":this.left,"v-avatar--right":this.right,...this.roundedClasses}},styles(){return{height:(0,o.kb)(this.size),minWidth:(0,o.kb)(this.size),width:(0,o.kb)(this.size),...this.measurableStyles}}},render(e){const t={staticClass:"v-avatar",class:this.classes,style:this.styles,on:this.$listeners};return e("div",this.setBackgroundColor(this.color,t),this.$slots.default)}})}}]);
//# sourceMappingURL=userData.5bfd525b.js.map